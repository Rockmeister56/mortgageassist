<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Botemia ¬∑ Sales Procedure System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(145deg, #0a0f1e 0%, #0f1a2f 100%);
            color: white;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-area {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo-icon {
            font-size: 2.8rem;
            animation: pulse 3s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .logo-area h1 {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #ffffff, #f8c400);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .badge {
            background: rgba(248, 196, 0, 0.15);
            border: 1px solid #f8c400;
            color: #ffd966;
            padding: 8px 20px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Market Selector */
        .market-selector {
            background: rgba(18, 28, 46, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 30px;
        }

        .selector-title {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .market-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .market-card {
            background: rgba(0,0,0,0.25);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .market-card:hover {
            border-color: #f8c400;
            transform: translateY(-2px);
        }

        .market-card.selected {
            border-color: #f8c400;
            background: rgba(248,196,0,0.1);
        }

        .market-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .market-name {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 4px;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 28px;
            margin-bottom: 30px;
        }

        @media (max-width: 1000px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        /* Procedure Panel */
        .procedure-panel {
            background: rgba(18, 28, 46, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 24px;
            padding: 28px;
        }

        .panel-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }

        .panel-header h2 {
            font-size: 1.4rem;
            font-weight: 600;
        }

        .procedure-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            flex: 1;
            min-width: 120px;
        }

        .tab-btn.active {
            background: #f8c400;
            color: #0a0f1e;
            border-color: #f8c400;
        }

        .procedure-content {
            background: rgba(0,0,0,0.25);
            border-radius: 16px;
            padding: 24px;
            min-height: 500px;
        }

        .step-list {
            list-style: none;
        }

        .step-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        .step-number {
            display: inline-block;
            background: #f8c400;
            color: #0a0f1e;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            text-align: center;
            line-height: 28px;
            font-weight: 700;
            margin-right: 12px;
        }

        .step-title {
            font-weight: 700;
            color: #f8c400;
            margin-bottom: 8px;
        }

        .template-box {
            background: rgba(248,196,0,0.1);
            border-left: 4px solid #f8c400;
            padding: 16px;
            margin: 16px 0;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
        }

        .copy-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            margin-top: 8px;
        }

        .copy-btn:hover {
            background: #f8c400;
            color: #0a0f1e;
        }

        /* Templates Panel */
        .templates-panel {
            background: rgba(18, 28, 46, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 24px;
            padding: 28px;
        }

        .template-category {
            margin-bottom: 28px;
        }

        .template-category h3 {
            color: #f8c400;
            margin-bottom: 16px;
            font-size: 1.2rem;
        }

        .template-card {
            background: rgba(0,0,0,0.25);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .template-card:hover {
            background: rgba(248,196,0,0.1);
        }

        .template-card.active {
            border: 2px solid #f8c400;
        }

        .template-preview {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
            margin: 8px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Tracker */
        .tracker-panel {
            background: rgba(18, 28, 46, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 24px;
            padding: 28px;
            margin-top: 30px;
        }

        .tracker-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tracker-card {
            background: rgba(0,0,0,0.25);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .tracker-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #f8c400;
            margin: 10px 0;
        }

        .tracker-label {
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
        }

        .tracker-btn {
            background: #f8c400;
            color: #0a0f1e;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 12px;
            width: 100%;
        }

        .footer {
            margin-top: 40px;
            color: rgba(255,255,255,0.4);
            font-size: 0.8rem;
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo-area">
                <div class="logo-icon">‚ö°</div>
                <h1>Sales Procedure System</h1>
            </div>
            <div class="badge">
                <span>üéØ MARKET-SPECIFIC</span>
                <span style="margin-left: 8px;">v2.0</span>
            </div>
        </div>

        <!-- Market Selector -->
        <div class="market-selector">
            <div class="selector-title">
                <span style="font-size: 1.8rem;">üé™</span>
                <h2 style="color: white;">Select Your Market</h2>
            </div>
            <div class="market-grid" id="marketGrid">
                <!-- Populated by JS -->
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Left: Procedures -->
            <div class="procedure-panel">
                <div class="panel-header">
                    <span style="font-size: 1.8rem;">üìã</span>
                    <h2>Procedures</h2>
                </div>

                <div class="procedure-tabs" id="procedureTabs">
                    <button class="tab-btn active" onclick="switchProcedureTab('facebook')">üìò Facebook Groups</button>
                    <button class="tab-btn" onclick="switchProcedureTab('linkedin')">üîó LinkedIn</button>
                    <button class="tab-btn" onclick="switchProcedureTab('followup')">üìû Follow-Up</button>
                </div>

                <div class="procedure-content" id="procedureContent">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Right: Templates -->
            <div class="templates-panel">
                <div class="panel-header">
                    <span style="font-size: 1.8rem;">üìù</span>
                    <h2>Message Templates</h2>
                </div>

                <div id="templatesContainer">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <!-- Tracker -->
        <div class="tracker-panel">
            <div class="panel-header">
                <span style="font-size: 1.8rem;">üìä</span>
                <h2>Daily Activity Tracker</h2>
            </div>

            <div class="tracker-grid" id="trackerGrid">
                <div class="tracker-card">
                    <div>üë• Facebook</div>
                    <div class="tracker-number" id="fbConnections">0</div>
                    <div class="tracker-label">New Connections</div>
                    <button class="tracker-btn" onclick="incrementTracker('fb')">+1</button>
                </div>
                <div class="tracker-card">
                    <div>üíº LinkedIn</div>
                    <div class="tracker-number" id="liConnections">0</div>
                    <div class="tracker-label">New Connections</div>
                    <button class="tracker-btn" onclick="incrementTracker('li')">+1</button>
                </div>
                <div class="tracker-card">
                    <div>üí¨ Conversations</div>
                    <div class="tracker-number" id="conversations">0</div>
                    <div class="tracker-label">Started</div>
                    <button class="tracker-btn" onclick="incrementTracker('convos')">+1</button>
                </div>
                <div class="tracker-card">
                    <div>üìÖ Consultations</div>
                    <div class="tracker-number" id="consultations">0</div>
                    <div class="tracker-label">Booked</div>
                    <button class="tracker-btn" onclick="incrementTracker('consults')">+1</button>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>‚ö° Market-Specific Sales Procedures ¬∑ Facebook ¬∑ LinkedIn ¬∑ Follow-Up System</p>
        </div>
    </div>

    <script>
        // ============================================
        // SALES PROCEDURE SYSTEM
        // ============================================

        // Market Data
        const markets = {
            mortgage: {
                name: 'Mortgage',
                icon: 'üè†',
                keywords: ['rates', 'pre-approval', 'credit score', 'down payment', 'refinance'],
                painPoints: ['credit issues', 'self-employed', 'first-time buyer', 'investment property'],
                templates: {
                    intro: "Hi [Name]! I noticed you're in [Group] and saw your interest in [topic]. I specialize in helping [type] with [specific challenge]. Would love to connect!",
                    video: "Hey [Name]! Quick video for you about [topic] - thought it might help with [their challenge]. [Video Link] Let me know your thoughts!",
                    consultation: "Based on our conversation, I think a quick 15-min chat could help clarify [their specific situation]. No pressure, just happy to share insights. When works for you?"
                }
            },
            insurance: {
                name: 'Insurance',
                icon: 'üõ°Ô∏è',
                keywords: ['coverage', 'premiums', 'life insurance', 'health insurance', 'protect'],
                painPoints: ['affordable rates', 'family protection', 'business coverage', 'term vs whole'],
                templates: {
                    intro: "Hi [Name]! Saw you're in [Group] and interested in [topic]. I help [type] find the right coverage without overpaying. Would love to connect!",
                    video: "Hey [Name]! Here's a quick video about [topic] that might help with [their concern]. [Video Link] Curious what you think!",
                    consultation: "Would you be open to a 15-min chat about your [insurance need]? I can share some options and answer any questions. No obligation!"
                }
            },
            realestate: {
                name: 'Real Estate',
                icon: 'üè°',
                keywords: ['buying', 'selling', 'market', 'home', 'investment'],
                painPoints: ['first-time buyer', 'pricing', 'market conditions', 'investment property'],
                templates: {
                    intro: "Hi [Name]! Noticed you're in [Group] and interested in [topic]. I specialize in [specific area/market] and love helping people navigate [challenge]. Connect?",
                    video: "Hey [Name]! Quick market update video about [topic] - thought you might find it helpful. [Video Link] What are your thoughts?",
                    consultation: "Based on what you shared, a quick call could help clarify your options. I do free 15-min consultations - want to grab time this week?"
                }
            },
            coaching: {
                name: 'Business Coaching',
                icon: 'üöÄ',
                keywords: ['growth', 'marketing', 'leads', 'sales', 'business'],
                painPoints: ['getting clients', 'scaling', 'time management', 'consistency'],
                templates: {
                    intro: "Hi [Name]! Saw you in [Group] working on [topic]. I help [type] achieve [result] without burnout. Would love to connect!",
                    video: "Hey [Name]! Here's a strategy video about [topic] that's been working for my clients. [Video Link] Would this help with your [challenge]?",
                    consultation: "Would you be open to a strategy call? 20 mins, no pitch - just help you clarify your next steps. When works?"
                }
            },
            health: {
                name: 'Health & Wellness',
                icon: 'üåø',
                keywords: ['wellness', 'health', 'fitness', 'nutrition', 'supplements'],
                painPoints: ['energy', 'weight loss', 'stress', 'healthy habits'],
                templates: {
                    intro: "Hi [Name]! Noticed we're both in [Group] interested in [topic]. I help [type] achieve [result] naturally. Connect?",
                    video: "Hey [Name]! Quick video about [topic] that might help with [their goal]. [Video Link] Would love your thoughts!",
                    consultation: "I offer free 15-min wellness consultations where we can chat about your goals. Interested in finding a time?"
                }
            }
        };

        // Procedures Data
        const procedures = {
            facebook: {
                title: 'üìò Facebook Groups Procedure',
                steps: [
                    {
                        title: 'Find Your Groups',
                        description: 'Search for 3-5 groups where your ideal clients hang out. Use keywords related to your market.',
                        template: 'Search terms: [market keywords] + "entrepreneurs", "business owners", "community"'
                    },
                    {
                        title: 'Audit & Select',
                        description: 'Use the audit scorecard to evaluate each group. Select your top 2-3 to focus on.',
                        template: 'Criteria: 500+ members, active daily, admin engaged, members ask questions'
                    },
                    {
                        title: 'Connect with Admin',
                        description: 'Message the admin before posting. Build relationship first.',
                        template: 'Hi [Admin]! Just joined [Group] and love what you\'ve built here. Looking forward to being part of the community!'
                    },
                    {
                        title: 'Introduction Post',
                        description: 'Post a genuine intro WITHOUT pitching. Focus on connection.',
                        template: 'Hi everyone! üëã Just joined. I\'m [Name] and I help [ideal client] with [result]. Excited to learn from this group!'
                    },
                    {
                        title: 'Daily Engagement',
                        description: '15-20 mins daily: comment on 5 posts, reply to comments, accept friend requests.',
                        template: 'ACE Framework: Add value, Clarify with questions, Encourage others'
                    },
                    {
                        title: 'Move to Profile',
                        description: 'When someone engages consistently, they\'ll visit your profile. Make sure it sells!',
                        template: 'Profile must have: Clear bio, recent posts about your work, pinned offer/lead magnet'
                    },
                    {
                        title: 'Send Video',
                        description: 'After genuine conversation, send a non-intrusive video addressing their specific situation.',
                        template: 'Hey [Name]! Been thinking about our chat about [topic]. Made a quick 2-min video with some thoughts: [Link] No pressure, just wanted to share!'
                    },
                    {
                        title: 'Offer Consultation',
                        description: 'If they engage with video, offer a free consultation to explore helping them.',
                        template: 'Glad the video was helpful! Would you be open to a quick 15-min call to discuss your [specific situation] further? No obligation - just happy to help!'
                    }
                ]
            },
            linkedin: {
                title: 'üîó LinkedIn Procedure',
                steps: [
                    {
                        title: 'Optimize Profile',
                        description: 'Your profile is your storefront. Make it compelling.',
                        template: 'Headline: [Your Title] helping [ideal client] achieve [result]\nAbout: First 3 lines must hook them\nFeatured: Pin your best content'
                    },
                    {
                        title: 'Find Your Audience',
                        description: 'Search for your ideal clients using filters.',
                        template: 'Search: [Job titles] + [Industry] + [Location]\nExample: "Mortgage Broker" + "Real Estate" + "Your City"'
                    },
                    {
                        title: 'Send Connection Request',
                        description: 'Personalize every request. No selling yet.',
                        template: 'Hi [Name], I came across your profile and noticed we both work in [industry]. Would love to connect and follow your work!'
                    },
                    {
                        title: 'Engage With Content',
                        description: 'Like and comment on their posts for 3-5 days before messaging.',
                        template: 'Comment examples: "Great insight on [topic]!" or "This really resonates. [Add thoughtful question]"'
                    },
                    {
                        title: 'Send Video',
                        description: 'After engagement, send a non-intrusive video message.',
                        template: 'Hi [Name]! Been following your content about [topic] - really valuable stuff. Made a quick video about [related topic] that might interest you: [Link] Just sharing in case helpful!'
                    },
                    {
                        title: 'Nurture Conversation',
                        description: 'If they respond, ask about their goals/challenges.',
                        template: 'Glad you liked the video! What\'s your biggest challenge with [topic] right now? Always curious to learn from others in the space.'
                    },
                    {
                        title: 'Offer Consultation',
                        description: 'After genuine conversation, offer a call to explore helping them.',
                        template: 'Based on what you\'ve shared, I think a quick chat could be valuable. I do free 15-min strategy calls - want to grab time this week?'
                    }
                ]
            },
            followup: {
                title: 'üìû Follow-Up Procedure',
                steps: [
                    {
                        title: 'Day 1 - Initial Contact',
                        description: 'After connecting, send a warm thank you message.',
                        template: 'Hey [Name]! Thanks for connecting. Really enjoyed our chat about [topic]. Looking forward to staying in touch!'
                    },
                    {
                        title: 'Day 3 - Value Share',
                        description: 'Share something valuable related to your conversation.',
                        template: 'Saw this article about [topic] and thought of you: [Link] Hope it\'s helpful!'
                    },
                    {
                        title: 'Day 7 - Check In',
                        description: 'Light check-in, no agenda.',
                        template: 'Hey [Name]! How\'s [their project/goal] coming along? Hope you\'re crushing it!'
                    },
                    {
                        title: 'Day 14 - Video Follow-Up',
                        description: 'Send a short video addressing their specific situation.',
                        template: 'Hey [Name]! Quick video check-in about [their challenge]. [Video Link] No response needed - just wanted to share some thoughts!'
                    },
                    {
                        title: 'Day 21 - Offer Consultation',
                        description: 'If they\'ve engaged, offer a call.',
                        template: 'Been thinking about your situation with [challenge]. Would you be open to a 15-min strategy session? Happy to share some ideas.'
                    },
                    {
                        title: 'Day 30 - Final Check',
                        description: 'One last touch before moving to long-term nurture.',
                        template: 'Hey [Name]! Just checking in one more time. If you ever want to chat about [topic], my door\'s always open. No pressure, just wanted to stay on your radar!'
                    },
                    {
                        title: 'Ongoing Nurture',
                        description: 'Stay on their radar without being pushy.',
                        template: 'Weekly: Like/comment on their posts\nMonthly: Share valuable content\nQuarterly: Personal check-in'
                    }
                ]
            }
        };

        // Templates Data
        const templateCategories = {
            connection: [
                { name: 'Facebook Intro Post', content: 'Hi everyone! üëã Just joined this amazing group. I\'m [Name] and I help [ideal client] achieve [result]. Really excited to learn from all of you! What\'s everyone working on this week?' },
                { name: 'LinkedIn Connection', content: 'Hi [Name], I came across your profile and was impressed by your work in [industry]. Would love to connect and follow your journey!' },
                { name: 'Admin Message', content: 'Hi [Admin]! Just joined [Group] and wanted to say thanks for creating this space. The community you\'ve built is exactly what I was looking for.' }
            ],
            video: [
                { name: 'Value Video - Facebook', content: 'Hey [Name]! üëã Quick video about [topic] based on our chat. Hope it helps with [their challenge]! [Video Link] No pressure, just wanted to share!' },
                { name: 'Value Video - LinkedIn', content: 'Hi [Name]! Been following your content about [topic] - really valuable stuff. Made a quick video about [related topic] that might interest you: [Video Link] Just sharing in case helpful!' },
                { name: 'Follow-Up Video', content: 'Hey [Name]! Quick check-in video about [topic]. Thinking of you and wanted to share some thoughts that might help with [their goal]. [Video Link] Chat soon!' }
            ],
            consultation: [
                { name: 'Soft Offer', content: 'Based on what you\'ve shared about [their challenge], I think a quick chat could be valuable. No pitch, just happy to share some insights. When works for you?' },
                { name: 'Direct Offer', content: 'Would you be open to a 15-min consultation? We can discuss [their situation] and I can share how I\'ve helped others in similar situations. No obligation!' },
                { name: 'Follow-Up Offer', content: 'Been thinking about our conversation. If you\'re still navigating [challenge], I\'d love to hop on a quick call and share some ideas that might help. Interested?' }
            ],
            nurture: [
                { name: 'Value Share', content: 'Hey [Name]! Came across this [article/tool/resource] about [topic] and thought of you. Hope it\'s helpful! [Link]' },
                { name: 'Check-In', content: 'Hey [Name]! Just checking in - how\'s [their project/goal] coming along? Hope you\'re making great progress!' },
                { name: 'Final Touch', content: 'Hey [Name]! Wanted to stay on your radar. If you ever need help with [topic], I\'m always here. No pressure, just want to be a resource!' }
            ]
        };

        // State
        let selectedMarket = 'mortgage';
        let activeTab = 'facebook';
        let selectedTemplate = null;

        // Initialize
        function init() {
            renderMarkets();
            renderProcedures();
            renderTemplates();
            loadTracker();
        }

        // Render Markets
        function renderMarkets() {
            const grid = document.getElementById('marketGrid');
            grid.innerHTML = Object.entries(markets).map(([key, market]) => `
                <div class="market-card ${selectedMarket === key ? 'selected' : ''}" onclick="selectMarket('${key}')">
                    <div class="market-icon">${market.icon}</div>
                    <div class="market-name">${market.name}</div>
                    <div style="font-size: 0.8rem; color: rgba(255,255,255,0.5);">${market.keywords.slice(0, 2).join(' ¬∑ ')}</div>
                </div>
            `).join('');
        }

        // Select Market
        window.selectMarket = function(marketKey) {
            selectedMarket = marketKey;
            renderMarkets();
            renderProcedures();
            renderTemplates();
        };

        // Switch Procedure Tab
        window.switchProcedureTab = function(tab) {
            activeTab = tab;
            renderProcedures();
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        };

        // Render Procedures
        function renderProcedures() {
            const procedure = procedures[activeTab];
            const market = markets[selectedMarket];
            
            let html = `<h3 style="margin-bottom: 20px; color: #f8c400;">${procedure.title}</h3>`;
            html += `<div style="margin-bottom: 20px; padding: 12px; background: rgba(248,196,0,0.1); border-radius: 8px;">
                <strong>Market:</strong> ${market.icon} ${market.name}<br>
                <strong>Keywords:</strong> ${market.keywords.join(' ¬∑ ')}
            </div>`;
            
            html += '<div class="step-list">';
            
            procedure.steps.forEach((step, index) => {
                // Replace placeholders with market-specific data
                let stepTemplate = step.template;
                stepTemplate = stepTemplate.replace(/\[market keywords\]/g, market.keywords.join(', '));
                stepTemplate = stepTemplate.replace(/\[ideal client\]/g, market.name === 'Mortgage' ? 'home buyers' : 
                                                        market.name === 'Insurance' ? 'families' : 
                                                        market.name === 'Real Estate' ? 'home sellers' : 'business owners');
                
                html += `
                    <div class="step-item">
                        <div class="step-title">
                            <span class="step-number">${index + 1}</span>
                            ${step.title}
                        </div>
                        <p style="margin-bottom: 12px; color: rgba(255,255,255,0.8);">${step.description}</p>
                        <div class="template-box">
                            ${stepTemplate}
                        </div>
                        <button class="copy-btn" onclick="copyToClipboard(\`${stepTemplate.replace(/`/g, '\\`')}\`)">
                            üìã Copy Template
                        </button>
                    </div>
                `;
            });
            
            html += '</div>';
            
            document.getElementById('procedureContent').innerHTML = html;
        }

        // Render Templates
        function renderTemplates() {
            const market = markets[selectedMarket];
            const container = document.getElementById('templatesContainer');
            
            let html = '';
            
            for (const [category, templates] of Object.entries(templateCategories)) {
                html += `<div class="template-category">
                    <h3>${category === 'connection' ? 'ü§ù Connection' : 
                           category === 'video' ? 'üé• Video Messages' : 
                           category === 'consultation' ? 'üìû Consultation' : 'üå± Nurture'}</h3>`;
                
                templates.forEach(template => {
                    // Replace placeholders
                    let content = template.content;
                    content = content.replace(/\[ideal client\]/g, market.name === 'Mortgage' ? 'home buyers' : 
                                                    market.name === 'Insurance' ? 'families' : 
                                                    market.name === 'Real Estate' ? 'home sellers' : 'business owners');
                    
                    html += `
                        <div class="template-card ${selectedTemplate === template.name ? 'active' : ''}" 
                             onclick="selectTemplate('${template.name}')">
                            <div style="font-weight: 700; margin-bottom: 4px;">${template.name}</div>
                            <div class="template-preview">${content.substring(0, 80)}...</div>
                            <button class="copy-btn" onclick="copyToClipboard(\`${content.replace(/`/g, '\\`')}\`); event.stopPropagation();">
                                üìã Copy
                            </button>
                        </div>
                    `;
                });
                
                html += '</div>';
            }
            
            container.innerHTML = html;
        }

        // Select Template
        window.selectTemplate = function(templateName) {
            selectedTemplate = templateName;
            renderTemplates();
        };

        // Copy to Clipboard
        window.copyToClipboard = function(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('‚úÖ Template copied to clipboard!');
            });
        };

        // Tracker
        let tracker = {
            fb: 0,
            li: 0,
            convos: 0,
            consults: 0
        };

        function loadTracker() {
            const saved = localStorage.getItem('salesTracker');
            if (saved) {
                tracker = JSON.parse(saved);
                updateTrackerDisplay();
            }
        }

        function saveTracker() {
            localStorage.setItem('salesTracker', JSON.stringify(tracker));
        }

        function updateTrackerDisplay() {
            document.getElementById('fbConnections').textContent = tracker.fb;
            document.getElementById('liConnections').textContent = tracker.li;
            document.getElementById('conversations').textContent = tracker.convos;
            document.getElementById('consultations').textContent = tracker.consults;
        }

        window.incrementTracker = function(type) {
            switch(type) {
                case 'fb':
                    tracker.fb++;
                    break;
                case 'li':
                    tracker.li++;
                    break;
                case 'convos':
                    tracker.convos++;
                    break;
                case 'consults':
                    tracker.consults++;
                    break;
            }
            updateTrackerDisplay();
            saveTracker();
        };

        // Initialize on load
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>